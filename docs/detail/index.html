<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-detail">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v2.3.1">
<title data-rh="true">Detail | GitHub Actions and Renovate Guide</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://suzuki-shunsuke.github.io/guide-github-action-renovate/detail"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Detail | GitHub Actions and Renovate Guide"><meta data-rh="true" name="description" content="Create a GitHub branch protection rule of the default branch"><meta data-rh="true" property="og:description" content="Create a GitHub branch protection rule of the default branch"><link data-rh="true" rel="canonical" href="https://suzuki-shunsuke.github.io/guide-github-action-renovate/detail"><link data-rh="true" rel="alternate" href="https://suzuki-shunsuke.github.io/guide-github-action-renovate/detail" hreflang="en"><link data-rh="true" rel="alternate" href="https://suzuki-shunsuke.github.io/guide-github-action-renovate/detail" hreflang="x-default"><link rel="stylesheet" href="/guide-github-action-renovate/assets/css/styles.14eff5e5.css">
<link rel="preload" href="/guide-github-action-renovate/assets/js/runtime~main.a33f4936.js" as="script">
<link rel="preload" href="/guide-github-action-renovate/assets/js/main.4ce925e7.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/guide-github-action-renovate/"><b class="navbar__title text--truncate">GitHub Actions and Renovate Guide</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/suzuki-shunsuke/guide-github-action-renovate" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="searchBox_ZlJk"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebarViewport_Xe31"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guide-github-action-renovate/">Guide of GitHub Actions and Renovate</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/guide-github-action-renovate/detail">Detail</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guide-github-action-renovate/summary-personal-project">Summary - Personal Project</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/guide-github-action-renovate/summary-team-development">Summary - Team Development</a></li></ul></nav></div></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/guide-github-action-renovate/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Detail</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Detail</h1><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-github-branch-protection-rule-of-the-default-branch">Create a GitHub branch protection rule of the default branch<a href="#create-a-github-branch-protection-rule-of-the-default-branch" class="hash-link" aria-label="Direct link to Create a GitHub branch protection rule of the default branch" title="Direct link to Create a GitHub branch protection rule of the default branch">​</a></h2><ul><li><a href="https://docs.github.com/en/repositories/configuring-branches-and-merges-in-your-repository/defining-the-mergeability-of-pull-requests/managing-a-branch-protection-rule" target="_blank" rel="noopener noreferrer">Managing a branch protection rule</a></li></ul><p>You should protect the default branch by GitHub branch protection rule.
At least, the following settings should be enabled.</p><ul><li><code>Require a pull request before merging</code></li><li><code>Require status checks to pass before merging</code><ul><li><code>Status checks that are required.</code>: <code>status-check</code></li></ul></li></ul><p>The meaning of these settings is simple, <strong>changes of the default branch must be tested</strong>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-github-actions-dedicated-job-for-status-check">Create a GitHub Actions&#x27; dedicated job for status check<a href="#create-a-github-actions-dedicated-job-for-status-check" class="hash-link" aria-label="Direct link to Create a GitHub Actions&#x27; dedicated job for status check" title="Direct link to Create a GitHub Actions&#x27; dedicated job for status check">​</a></h2><p><code>Status checks that are required.</code> is an essential setting.
You can&#x27;t merge a pull request whose <code>required jobs</code> fail,
but in other words you can merge a pull request even if jobs other than <code>required jobs</code> fail. This is undesirable.</p><p>So you should define a dedicated job and adding only the job to <code>Status checks that are required.</code>.
We call this job <code>status-check</code> job.</p><p>e.g.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">status-check</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># This job is used for main branch&#x27;s branch protection rule&#x27;s status check.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># If all dependent jobs succeed or are skipped this job succeeds.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> update</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">aqua</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">checksums</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> test</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> build</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> renovate</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">validator</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ghalint</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> failure()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> exit 1</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><h2 class="anchor anchorWithStickyNavbar_LWe7" id="merge-github-actions-workflows-to-one-workfklow-for-status-check">Merge GitHub Actions workflows to one workfklow for status check<a href="#merge-github-actions-workflows-to-one-workfklow-for-status-check" class="hash-link" aria-label="Direct link to Merge GitHub Actions workflows to one workfklow for status check" title="Direct link to Merge GitHub Actions workflows to one workfklow for status check">​</a></h2><p>If a workflow is run only when specific files are changed, you can&#x27;t add the workflow&#x27;s jobs to <code>Status checks that are required.</code>, so even if the workflow fails you can merge a pull request. This is undesirable.</p><p>To solve the issue, you should merge the workflow to one workflow which is always triggered and add jobs to <code>status-check</code> job&#x27;s <code>needes</code>. And to run jobs only when specific files are changed, you should use <a href="https://github.com/dorny/paths-filter" target="_blank" rel="noopener noreferrer">dorny/paths-filter</a> or similar action.</p><p>e.g.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">path-filter</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">outputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">renovate-config-validator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">steps.changes.outputs.renovate</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">validator</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> dorny/paths</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">filter@v2</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> changes</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">with</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">filters</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            renovate-config-validator:</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">              - renovate.json5</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">renovate-config-validator</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> suzuki</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">shunsuke/renovate</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">validator</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">workflow/.github/workflows/validate.yaml@v0.2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">filter</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> needs.path</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">filter.outputs.renovate</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">config</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">validator == &#x27;true&#x27;</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>There are two exceptions of <code>one workflow</code>.</p><ol><li><code>actionlint</code>: A workflow to run <a href="https://github.com/rhysd/actionlint" target="_blank" rel="noopener noreferrer">actionlint</a></li></ol><p>actionlint should be run in a dedicated workflow because if the workflow gets invalid actionlint isn&#x27;t run and you can&#x27;t find the issue.</p><ol start="2"><li>Workflows using <a href="https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment#deployment-branches" target="_blank" rel="noopener noreferrer">GitHub Actions Environment&#x27;s Deployment branch</a></li></ol><h2 class="anchor anchorWithStickyNavbar_LWe7" id="update-dependencies-continuously-by-renovate">Update dependencies continuously by Renovate<a href="#update-dependencies-continuously-by-renovate" class="hash-link" aria-label="Direct link to Update dependencies continuously by Renovate" title="Direct link to Update dependencies continuously by Renovate">​</a></h2><p>It is important to keep dependencies up-to-date.
If you don&#x27;t update dependencies continuously, you would have the following issues.</p><ul><li>You can&#x27;t take any support from maintainers</li><li>You can&#x27;t use new features</li><li>The behaviour of a old tool is different from the latest document</li><li>If you do a big update including a lot of changes, it is hard to check Release Notes, verify the update, solve the upgrading issues, and detect the root cause when any problem occurs after upgrading</li><li>The frequency of big updates is lower than the frequency of continuous updates, so it is difficult to keep the knowledge and improve the procedure</li></ul><p>On the other hand, if you keep dependencies up-to-date, you can solve the above issues.</p><p>Renovate enables the continuous updates.
Renovate supports various managers and datasources and flexible settings.
You don&#x27;t have to update dependencies manually.</p><p>Renovate is awesome and can be introduced easily, but it isn&#x27;t enough to just install Renovate.
To utilize Renovate fully, you should not only tune Renovate settings but also configure GitHub Repository settings properly and tune GitHub Actions Workflows in accordance with Renovate.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="merge-pull-requests-automatically">Merge pull requests automatically<a href="#merge-pull-requests-automatically" class="hash-link" aria-label="Direct link to Merge pull requests automatically" title="Direct link to Merge pull requests automatically">​</a></h2><p>Renovate would create many pull requests every day.
It would be hard to review and merge all of them manually.
You would be exhausted and frustrated, and finally pull requests would tend to be left.</p><p>To solve the problem, you should merge pull requests from Renovate automatically.
The burden of handling pull requests from Renovate would decrease and you would be able to focus on more essential tasks.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="exclude-risky-updates-from-automerge">Exclude risky updates from automerge<a href="#exclude-risky-updates-from-automerge" class="hash-link" aria-label="Direct link to Exclude risky updates from automerge" title="Direct link to Exclude risky updates from automerge">​</a></h2><p>Some updates should be excluded from automerge.
For example, major updates should be excluded from automerge basically (If you know the major update is safe, you would be able merge pull requests automatically).
Renovate can enable or disable the automerge flexibly.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="use-github-auto-merge-feature">Use GitHub auto-merge feature<a href="#use-github-auto-merge-feature" class="hash-link" aria-label="Direct link to Use GitHub auto-merge feature" title="Direct link to Use GitHub auto-merge feature">​</a></h2><ul><li><a href="https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/incorporating-changes-from-a-pull-request/automatically-merging-a-pull-request" target="_blank" rel="noopener noreferrer">Automatically merging a pull request</a></li></ul><p>To merge a pull request safely, you should enable GitHub auto-merge.
To use this feature, you have to configure the branch protection rule described above.
Renovate supports the automerge, but using GitHub native auto-merge feature you can merge pull requests more quickly.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="test-dependency-updates-by-ci">Test dependency updates by CI<a href="#test-dependency-updates-by-ci" class="hash-link" aria-label="Direct link to Test dependency updates by CI" title="Direct link to Test dependency updates by CI">​</a></h2><p>Depency updates should be tested by CI.
Otherwise, you would miss bugs.
Probably you already test updates your application depends on directly, but maybe you don&#x27;t test updates workflows depend on.</p><p>For example, when a tool for document generation is updated, the tool should be run in CI, and the document should be updated automatically or CI should fail if the document is changed.</p><p>Automerge consists of CI&#x27;s reliability. It is mandatory to test dependency updates by CI in order to enable automerge.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="for-team-development">For team development<a href="#for-team-development" class="hash-link" aria-label="Direct link to For team development" title="Direct link to For team development">​</a></h2><p>If you maintain a repository with other team members, which means multiple users have the write permission, some additional settings are required.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-a-branch-protection-rule-of-the-default-branch-to-enforce-the-review">Configure a branch protection rule of the default branch to enforce the review<a href="#configure-a-branch-protection-rule-of-the-default-branch-to-enforce-the-review" class="hash-link" aria-label="Direct link to Configure a branch protection rule of the default branch to enforce the review" title="Direct link to Configure a branch protection rule of the default branch to enforce the review">​</a></h3><ul><li><code>Require a pull request before merging</code><ul><li><code>Require approvals</code> (1 approval)</li><li><code>Dismiss stale pull request approvals when new commits are pushed</code></li><li><code>Require review from Code Owners</code></li><li><code>Require approval of the most recent reviewable push</code></li></ul></li></ul><p>This settings means <strong>a pull request must be reviewed by at least one Code Owner</strong>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="configure-a-branch-protection-rule-of-renovate-branches-to-forbid-to-add-changes-without-the-review">Configure a branch protection rule of Renovate branches to forbid to add changes without the review<a href="#configure-a-branch-protection-rule-of-renovate-branches-to-forbid-to-add-changes-without-the-review" class="hash-link" aria-label="Direct link to Configure a branch protection rule of Renovate branches to forbid to add changes without the review" title="Direct link to Configure a branch protection rule of Renovate branches to forbid to add changes without the review">​</a></h3><p>You should create a branch protection rule of Renovate&#x27;s branches <code>renovate/*</code>.</p><ul><li><code>renovate/*</code> <ul><li><code>Do not allow bypassing the above settings</code></li><li><code>Restrict who can push to matching branches</code><ul><li><code>Restrict pushes that create matching branches</code><ul><li><code>renovate</code></li><li>Dedicated GitHub App</li></ul></li></ul></li><li><code>Allow deletions</code></li></ul></li></ul><p>You should forbid developers to push a commit to Renovate branches.
Otherwise, developers can push malicious code to a pull request of Renovate and can approve and merge the pull request.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="create-a-dedicated-github-app-to-push-commits-to-a-renovate-pull-request">Create a dedicated GitHub App to push commits to a Renovate pull request<a href="#create-a-dedicated-github-app-to-push-commits-to-a-renovate-pull-request" class="hash-link" aria-label="Direct link to Create a dedicated GitHub App to push commits to a Renovate pull request" title="Direct link to Create a dedicated GitHub App to push commits to a Renovate pull request">​</a></h4><p>Sometimes you would like to push a commit to a Renovate pull request automatically.
For example, you would like to update a autogenerated document.
In that case, you should create a dedicated GitHub App for it.
The GitHub App must be dedicated and be able to be used only in the workflow triggered by a pull request from Renovate.
Otherwise, developers can push a malicious code to a Renovate pull request using the GitHub App.</p><p>GitHub App&#x27;s private key must be managed with <a href="https://docs.github.com/en/actions/deployment/targeting-different-environments/using-environments-for-deployment" target="_blank" rel="noopener noreferrer">GitHub Environment&#x27;s Deployment branches and Environment secrets</a>.</p><p>If you use GitHub Environment&#x27;s Deployment branches, you have to create a GitHub Actions Workflow for it.
We call this workflow <code>renovate</code> workflow.</p><p>e.g.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">name</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> renovate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">push</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># Use push event instead of pull_request event to filter events by pull request&#x27;s head branch</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">branches</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;renovate/**&quot;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic"># This workflow is triggered only by Renovate pull request</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">get-pr</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get data regarding a pull request associated with the current commit.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># This is used to approve the pull request and enable automerge.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">outputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">found</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">steps.pr.outputs.pr_found</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Check if Renovate&#x27;s automerge is enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">automerge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;${{contains(steps.pr.outputs.pr_body, &#x27; **Automerge**: Enabled.&#x27;)}}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">number</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">steps.pr.outputs.number</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 8BitJonny/gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">current</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pr@2.2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">update-aqua-checksums-renovate</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> renovate </span><span class="token comment" style="color:#999988;font-style:italic"># Use GitHub Environment secrets</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># ...</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To filter the workflow by pull request&#x27;s head branch, you have to use <code>push</code> event instead of <code>pull_request</code> event.
And to get the pull request information on <code>push</code> event you have to use <a href="https://github.com/8BitJonny/gh-get-current-pr" target="_blank" rel="noopener noreferrer">8BitJonny/gh-get-current-pr</a> or similar action.</p><h4 class="anchor anchorWithStickyNavbar_LWe7" id="enable-github-automerge-in-renovate-workflow">Enable GitHub automerge in <code>renovate</code> workflow<a href="#enable-github-automerge-in-renovate-workflow" class="hash-link" aria-label="Direct link to enable-github-automerge-in-renovate-workflow" title="Direct link to enable-github-automerge-in-renovate-workflow">​</a></h4><p>As I mentioned above, jobs of <code>renovate</code> workflow can&#x27;t be added to <code>Status checks that are required.</code>, so even if this workflow fails a pull request could be merged. Renovate&#x27;s <a href="https://docs.renovatebot.com/configuration-options/#platformautomerge" target="_blank" rel="noopener noreferrer">platformAutomerge</a> is danger because pull request could be merged regardless the result of <code>renovate</code> workflow.</p><p>To prevent a pull request that <code>renovate</code> workflow fails from being merged automatically, you should enable automerge in <code>renovate</code> workflow.</p><p>e.g.</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">jobs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">get-pr</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># Get data regarding a pull request associated with the current commit.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># This is used to approve the pull request and enable automerge.</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">outputs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">found</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">steps.pr.outputs.pr_found</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># Check if Renovate&#x27;s automerge is enabled</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">automerge</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;${{contains(steps.pr.outputs.pr_body, &#x27; **Automerge**: Enabled.&#x27;)}}&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token key atrule" style="color:#00a4db">number</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">steps.pr.outputs.number</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">uses</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> 8BitJonny/gh</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">get</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">current</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pr@2.2.0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">id</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> pr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token key atrule" style="color:#00a4db">auto-approve</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic"># approve pull requests from Renovate automatically</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">runs-on</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> ubuntu</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">latest</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> renovate</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">needs</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> get</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pr</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">      needs.get-pr.outputs.found == &#x27;true&#x27; &amp;&amp; needs.get-pr.outputs.automerge == &#x27;true&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">permissions</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token key atrule" style="color:#00a4db">steps</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># https://github.com/cli/cli/issues/6680</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># HTTP 401: Personal access tokens with fine grained access do not support the GraphQL API (https://api.github.com/graphql)</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic"># - run: gh -R aquaproj/example-update-checksum pr review -a &quot;$PR_NUMBER&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> </span><span class="token key atrule" style="color:#00a4db">run</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">          gh api \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            --method POST \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            -H &quot;Accept: application/vnd.github+json&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            &quot;/repos/$GITHUB_REPOSITORY/pulls/$PR_NUMBER/reviews&quot; \</span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">            -f event=&#x27;APPROVE&#x27;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token key atrule" style="color:#00a4db">env</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">PR_NUMBER</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">needs.get</span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain">pr.outputs.number</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token key atrule" style="color:#00a4db">GITHUB_TOKEN</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> $</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">secrets.GH_TOKEN_APPROVE_RENOVATE_PR</span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>To approve a pull request, the approver must be a code owner but unfortunately GitHub App can&#x27;t be a code owner.
So you have to use a GitHub personal access token.
You should create a bot account and create the user&#x27;s <a href="https://github.blog/2022-10-18-introducing-fine-grained-personal-access-tokens-for-github/" target="_blank" rel="noopener noreferrer">fine-grained personal access token</a>.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="for-public-repository">For public repository<a href="#for-public-repository" class="hash-link" aria-label="Direct link to For public repository" title="Direct link to For public repository">​</a></h2><p>GitHub Actions workflows should pass even if a pull request is sent from a fork repository.
A pull request from a fork repository can&#x27;t access GitHub Secrets and <code>GITHUB_TOKEN</code> has only read permissions,
so steps requiring secrets or write permissions should be skipped or fixed.</p><p>Pull request from a fork repository:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">  github.event_name == &#x27;pull_request&#x27; &amp;&amp; github.event.pull_request.head.repo.fork</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>Other than pull request from a fork repository:</p><div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">if</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">|</span><span class="token scalar string" style="color:#e3116c"></span><br></span><span class="token-line" style="color:#393A34"><span class="token scalar string" style="color:#e3116c">  github.event_name != &#x27;pull_request&#x27; || ! github.event.pull_request.head.repo.fork</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/suzuki-shunsuke/guide-github-action-renovate/edit/main/docs/detail.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/guide-github-action-renovate/"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Guide of GitHub Actions and Renovate</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/guide-github-action-renovate/summary-personal-project"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Summary - Personal Project</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#create-a-github-branch-protection-rule-of-the-default-branch" class="table-of-contents__link toc-highlight">Create a GitHub branch protection rule of the default branch</a></li><li><a href="#create-a-github-actions-dedicated-job-for-status-check" class="table-of-contents__link toc-highlight">Create a GitHub Actions&#39; dedicated job for status check</a></li><li><a href="#merge-github-actions-workflows-to-one-workfklow-for-status-check" class="table-of-contents__link toc-highlight">Merge GitHub Actions workflows to one workfklow for status check</a></li><li><a href="#update-dependencies-continuously-by-renovate" class="table-of-contents__link toc-highlight">Update dependencies continuously by Renovate</a></li><li><a href="#merge-pull-requests-automatically" class="table-of-contents__link toc-highlight">Merge pull requests automatically</a></li><li><a href="#exclude-risky-updates-from-automerge" class="table-of-contents__link toc-highlight">Exclude risky updates from automerge</a></li><li><a href="#use-github-auto-merge-feature" class="table-of-contents__link toc-highlight">Use GitHub auto-merge feature</a></li><li><a href="#test-dependency-updates-by-ci" class="table-of-contents__link toc-highlight">Test dependency updates by CI</a></li><li><a href="#for-team-development" class="table-of-contents__link toc-highlight">For team development</a><ul><li><a href="#configure-a-branch-protection-rule-of-the-default-branch-to-enforce-the-review" class="table-of-contents__link toc-highlight">Configure a branch protection rule of the default branch to enforce the review</a></li><li><a href="#configure-a-branch-protection-rule-of-renovate-branches-to-forbid-to-add-changes-without-the-review" class="table-of-contents__link toc-highlight">Configure a branch protection rule of Renovate branches to forbid to add changes without the review</a></li></ul></li><li><a href="#for-public-repository" class="table-of-contents__link toc-highlight">For public repository</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 Shunsuke Suzuki. Built with Docusaurus.</div></div></div></footer></div>
<script src="/guide-github-action-renovate/assets/js/runtime~main.a33f4936.js"></script>
<script src="/guide-github-action-renovate/assets/js/main.4ce925e7.js"></script>
</body>
</html>